import React, { useState, useEffect } from 'react';
import {
  Menu, X, Home, Briefcase, Image, Users, Star, Calendar, ShoppingCart, UserPlus, Rss,
  Instagram, Twitter, Facebook, Linkedin,
  Palette, Handshake, Lightbulb
} from 'lucide-react';

// Main App component
export default function App() {
  const [showLoadingScreen, setShowLoadingScreen] = useState(true);
  const [showTaramaText, setShowTaramaText] = useState(false);
  const [fadeLoadingScreen, setFadeLoadingScreen] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [formData, setFormData] = useState({ name: '', email: '', message: '' });
  const [submissionStatus, setSubmissionStatus] = useState(null);

  // Handle the loading screen timing and fade-out
  useEffect(() => {
    // The loading duration has been changed to 10 seconds.
    const gifDuration = 10000;
    const textFadeInDuration = 1000;
    const screenFadeOutDuration = 1000;

    // Show "Tarama" text after the GIF finishes
    const showTextTimer = setTimeout(() => {
      setShowTaramaText(true);
    }, gifDuration);

    // Start fading out the entire screen after the text has been visible for a moment
    const fadeScreenTimer = setTimeout(() => {
      setFadeLoadingScreen(true);
    }, gifDuration + textFadeInDuration);

    // Remove the loading screen from the DOM after it has faded out
    const removeScreenTimer = setTimeout(() => {
      setShowLoadingScreen(false);
    }, gifDuration + textFadeInDuration + screenFadeOutDuration);

    return () => {
      clearTimeout(showTextTimer);
      clearTimeout(fadeScreenTimer);
      clearTimeout(removeScreenTimer);
    };
  }, []);

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleFormSubmit = async (e) => {
    e.preventDefault();
    setSubmissionStatus('submitting');
    // This is a placeholder for a real API call.
    // In a real application, you would send formData to a backend endpoint here.
    try {
      console.log('Simulating form submission with data:', formData);
      await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate network delay
      setSubmissionStatus('success');
      setFormData({ name: '', email: '', message: '' });
    } catch (error) {
      console.error('Form submission failed:', error);
      setSubmissionStatus('error');
    }
  };

  // Static data for the website sections
  const navLinks = [
    { name: 'Home', href: '#home', icon: Home },
    { name: 'Services', href: '#services', icon: Briefcase },
    { name: 'Gallery', href: '#gallery', icon: Image },
    { name: 'Team', href: '#team', icon: Users },
    { name: 'Testimonials', href: '#testimonials', icon: Star },
    { name: 'Events', href: '#events', icon: Calendar },
    { name: 'Community', href: '#community', icon: UserPlus },
    { name: 'Blog', href: '#blog', icon: Rss },
  ];

  const services = [
    {
      title: 'Event Management',
      description: 'From concept to execution, we handle every detail to create unforgettable events. Specializing in cultural, music, and corporate gatherings.',
      icon: Palette
    },
    {
      title: 'Creative Projects',
      description: 'Bringing artistic visions to life. We collaborate with creatives on everything from film production to art installations and digital campaigns.',
      icon: Lightbulb
    },
    {
      title: 'Talent Supply',
      description: 'Connecting top creative talent with projects. We provide a curated roster of artists, designers, musicians, and performers for your needs.',
      icon: Handshake
    },
  ];

  const teamMembers = [
    { name: 'John Doe', role: 'Founder & CEO', bio: 'A visionary leader passionate about African creative industries.', image: 'https://placehold.co/150x150/d1d5db/374151?text=John' },
    { name: 'Jane Smith', role: 'Chief Creative Officer', bio: 'An experienced creative director with a flair for innovative projects.', image: 'https://placehold.co/150x150/d1d5db/374151?text=Jane' },
    { name: 'Peter Green', role: 'Events Manager', bio: 'A master of logistics, ensuring every event runs smoothly and perfectly.', image: 'https://placehold.co/150x150/d1d5db/374151?text=Peter' },
    { name: 'Sarah Lee', role: 'Community Lead', bio: 'Connecting and nurturing our global network of over 400 creatives.', image: 'https://placehold.co/150x150/d1d5db/374151?text=Sarah' },
  ];

  const testimonials = [
    { quote: 'Working with Tarama Rwanda was a game-changer for our festival. Their professionalism and creative insights are unmatched.', author: 'Client A' },
    { quote: 'They helped us launch our brand with a stunning event that captivated our audience. Highly recommend!', author: 'Client B' },
    { quote: 'The talent we sourced through Tarama was incredible. We will definitely be collaborating with them again.', author: 'Client C' },
  ];

  const upcomingEvents = [
    { title: 'Kigali Art Fair', date: 'August 25, 2025', location: 'Kigali Convention Centre' },
    { title: 'Tech for Creatives Workshop', date: 'September 10, 2025', location: 'Tarama Hub' },
    { title: 'Creative Networking Night', date: 'October 5, 2025', location: 'The Spot' },
  ];

  const socialLinks = [
    { name: 'Instagram', icon: Instagram, href: 'https://www.instagram.com/tarama.rw/' },
    { name: 'Twitter', icon: Twitter, href: 'https://x.com/TaramaRwanda' },
    { name: 'Facebook', icon: Facebook, href: 'https://www.facebook.com/Taramarwanda' },
    { name: 'LinkedIn', icon: Linkedin, href: 'https://www.linkedin.com/company/tarama-rwanda/' },
  ];

  return (
    <>
      <style>
        {`
        :root {
          --primary-gold: #FFAA1D;
        }
        .text-fade-in {
          opacity: 0;
          transition: opacity 1s ease-in-out;
        }
        .text-fade-in.visible {
          opacity: 1;
        }
        `}
      </style>

      {/* Loading Screen */}
      {showLoadingScreen && (
        <div
          className={`fixed inset-0 z-50 flex flex-col items-center justify-center bg-gray-950 transition-opacity duration-1000 ${
            fadeLoadingScreen ? 'opacity-0' : 'opacity-100'
          }`}
        >
          {/* The image size has been adjusted to be smaller and centered */}
          <img
            src="https://i.imgur.com/yEmNcx1.gif"
            alt="Tarama Rwanda Loading Image"
            className="w-64 h-auto rounded-lg shadow-lg"
            onError={(e) => {
              // Fallback to a placeholder if the image fails to load
              e.target.onerror = null;
              e.target.src = "https://placehold.co/500x500/d1d5db/374151?text=Loading...";
            }}
          />
          <div className="relative z-10 mt-8">
            <div className={`text-6xl font-bold text-white text-fade-in ${showTaramaText ? 'visible' : ''}`}>
              Tarama
            </div>
          </div>
        </div>
      )}

      {/* Main App Content */}
      <div className="min-h-screen bg-gray-50 font-sans text-gray-900">
        {/* Header with Navigation */}
        <header className="sticky top-0 z-40 bg-white shadow-sm">
          <nav className="container mx-auto px-4 py-4 flex justify-between items-center">
            {/* Logo */}
            <a href="#" className="flex items-center">
              <img
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRzYzEe5wa8PXzdTUAXW2M3lxFRUOqsrgPqDw&s"
                alt="Tarama Rwanda Logo"
                className="h-10"
                onError={(e) => { e.target.onerror = null; e.target.src="https://placehold.co/150x50/374151/FFFFFF?text=Tarama+Rwanda"; }}
              />
            </a>

            {/* Desktop Navigation */}
            <ul className="hidden md:flex space-x-6">
              {navLinks.map((link) => (
                <li key={link.name}>
                  <a href={link.href} className="text-gray-600 hover:text-primary-gold transition-colors flex items-center gap-2" style={{ color: 'var(--primary-gold)' }}>
                    <link.icon className="w-5 h-5" />
                    <span>{link.name}</span>
                  </a>
                </li>
              ))}
              {/* Merch Store link - Placeholder */}
              <li>
                <a href="#" className="text-gray-600 hover:text-primary-gold transition-colors flex items-center gap-2" style={{ color: 'var(--primary-gold)' }}>
                  <ShoppingCart className="w-5 h-5" />
                  <span>Shop</span>
                </a>
              </li>
            </ul>

            {/* Mobile Menu Button */}
            <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="md:hidden text-gray-600 hover:text-primary-gold" style={{ color: 'var(--primary-gold)' }}>
              {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>
          </nav>

          {/* Mobile Dropdown Menu */}
          {isMenuOpen && (
            <div className="md:hidden absolute top-full left-0 right-0 bg-white shadow-lg p-4 transition-transform duration-300">
              <ul className="space-y-4">
                {navLinks.map((link) => (
                  <li key={link.name}>
                    <a href={link.href} onClick={() => setIsMenuOpen(false)} className="text-gray-600 hover:text-primary-gold transition-colors flex items-center gap-2" style={{ color: 'var(--primary-gold)' }}>
                      <link.icon className="w-5 h-5" />
                      <span>{link.name}</span>
                    </a>
                  </li>
                ))}
                <li>
                  <a href="#" onClick={() => setIsMenuOpen(false)} className="text-gray-600 hover:text-primary-gold transition-colors flex items-center gap-2" style={{ color: 'var(--primary-gold)' }}>
                    <ShoppingCart className="w-5 h-5" />
                    <span>Shop</span>
                  </a>
                </li>
              </ul>
            </div>
          )}
        </header>

        <main>
          {/* Hero Section */}
          <section id="home" className="relative text-white py-20 md:py-32 overflow-hidden rounded-b-[4rem]" style={{ backgroundColor: 'var(--primary-gold)' }}>
            <div className="container mx-auto px-4 text-center">
              <h1 className="text-4xl md:text-6xl font-extrabold mb-4 animate-fadeInUp">
                Rethinking Africa's Creative Ecosystems
              </h1>
              <p className="text-lg md:text-xl max-w-3xl mx-auto mb-8 animate-fadeIn delay-300">
                Tarama Rwanda is a pan-African youth-led initiative from Kigali, Rwanda, dedicated to developing the Culture, Tech, and Creative Industries in Africa. We are a hub to over 400 creatives across the world.
              </p>
              <a
                href="#services"
                className="inline-block bg-white text-gray-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-200 transition-all transform hover:scale-105 animate-fadeIn delay-500"
              >
                Discover Our Impact
              </a>
            </div>
          </section>

          {/* Services Section */}
          <section id="services" className="py-20 bg-gray-100">
            <div className="container mx-auto px-4 text-center">
              <h2 className="text-4xl font-bold mb-12">Our Services</h2>
              <div className="grid md:grid-cols-3 gap-8">
                {services.map((service) => (
                  <div key={service.title} className="bg-white p-8 rounded-2xl shadow-xl transform transition-transform hover:scale-105 hover:shadow-2xl">
                    <div className="flex justify-center items-center mb-6" style={{ color: 'var(--primary-gold)' }}>
                      <service.icon className="w-16 h-16" />
                    </div>
                    <h3 className="text-2xl font-bold mb-4">{service.title}</h3>
                    <p className="text-gray-600">{service.description}</p>
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* Gallery Section */}
          <section id="gallery" className="py-20">
            <div className="container mx-auto px-4 text-center">
              <h2 className="text-4xl font-bold mb-12">Our Gallery</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                {[
                  'https://images.unsplash.com/photo-1517457210348-da070f6cb7d3?q=80&w=2940&auto=format&fit=crop',
                  'https://images.unsplash.com/photo-1549880193-41c19b22e176?q=80&w=2940&auto=format&fit=crop',
                  'https://images.unsplash.com/photo-1516240217032-4916a04a6015?q=80&w=2940&auto=format&fit=crop',
                  'https://images.unsplash.com/photo-1522858100583-09477b63f738?q=80&w=2940&auto=format&fit=crop',
                  'https://images.unsplash.com/photo-1511216393521-49b828a2a475?q=80&w=2940&auto=format&fit=crop',
                  'https://images.unsplash.com/photo-1511986422312-32b49d567083?q=80&w=2940&auto=format&fit=crop'
                ].map((src, index) => (
                  <div key={index} className="relative group overflow-hidden rounded-xl shadow-lg">
                    <img src={src} alt={`Gallery Image ${index + 1}`} className="w-full h-72 object-cover transform transition-transform group-hover:scale-110" />
                    <div className="absolute inset-0 bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style={{ backgroundColor: 'var(--primary-gold)' }}>
                      <p className="text-gray-900 text-lg font-bold">Event Moment</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* About Us / Team Page Section */}
          <section id="team" className="py-20 bg-gray-100">
            <div className="container mx-auto px-4 text-center">
              <h2 className="text-4xl font-bold mb-12">Meet the Team</h2>
              <div className="grid md:grid-cols-4 gap-8">
                {teamMembers.map((member) => (
                  <div key={member.name} className="bg-white p-6 rounded-2xl shadow-xl">
                    <img src={member.image} alt={member.name} className="w-32 h-32 rounded-full mx-auto mb-4 object-cover" />
                    <h3 className="text-2xl font-bold">{member.name}</h3>
                    <p className="font-medium mb-4" style={{ color: 'var(--primary-gold)' }}>{member.role}</p>
                    <p className="text-gray-600">{member.bio}</p>
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* Testimonials Section */}
          <section id="testimonials" className="py-20 text-white" style={{ backgroundColor: 'var(--primary-gold)' }}>
            <div className="container mx-auto px-4 text-center">
              <h2 className="text-4xl font-bold mb-12">What Our Clients Say</h2>
              <div className="max-w-4xl mx-auto grid md:grid-cols-3 gap-8">
                {testimonials.map((testimonial, index) => (
                  <div key={index} className="bg-white text-gray-900 p-8 rounded-2xl shadow-xl">
                    <Star className="w-8 h-8 mb-4" style={{ color: 'var(--primary-gold)' }} />
                    <p className="italic text-lg mb-4">"{testimonial.quote}"</p>
                    <p className="font-bold">- {testimonial.author}</p>
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* Events Section */}
          <section id="events" className="py-20">
            <div className="container mx-auto px-4 text-center">
              <h2 className="text-4xl font-bold mb-12">Upcoming Events</h2>
              <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {upcomingEvents.map((event, index) => (
                  <div key={index} className="bg-white p-8 rounded-2xl shadow-xl transform transition-transform hover:scale-105">
                    <div className="flex items-center mb-4" style={{ color: 'var(--primary-gold)' }}>
                      <Calendar className="w-6 h-6 mr-3" />
                      <span className="text-lg font-medium">{event.date}</span>
                    </div>
                    <h3 className="2xl font-bold mb-2">{event.title}</h3>
                    <p className="text-gray-600">{event.location}</p>
                    <button className="mt-6 text-white font-bold py-2 px-6 rounded-full transition-colors" style={{ backgroundColor: 'var(--primary-gold)', hover: 'bg-yellow-600' }}>
                      Learn More
                    </button>
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* Community Signup Form Section */}
          <section id="community" className="py-20 bg-gray-100">
            <div className="container mx-auto px-4 text-center max-w-2xl">
              <h2 className="text-4xl font-bold mb-4">Join the Tarama Community</h2>
              <p className="text-gray-600 mb-8">
                Are you a creative? Join our global network of innovators and collaborators.
              </p>
              <div className="bg-white p-8 rounded-2xl shadow-xl">
                <form onSubmit={handleFormSubmit} className="space-y-6">
                  <div>
                    <label htmlFor="name" className="block text-left text-gray-700 font-medium mb-1">Name</label>
                    <input
                      type="text"
                      id="name"
                      name="name"
                      value={formData.name}
                      onChange={handleInputChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2"
                      style={{ '--tw-ring-color': 'var(--primary-gold)' }}
                    />
                  </div>
                  <div>
                    <label htmlFor="email" className="block text-left text-gray-700 font-medium mb-1">Email</label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      value={formData.email}
                      onChange={handleInputChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2"
                      style={{ '--tw-ring-color': 'var(--primary-gold)' }}
                    />
                  </div>
                  <div>
                    <label htmlFor="message" className="block text-left text-gray-700 font-medium mb-1">Your Creative Field</label>
                    <textarea
                      id="message"
                      name="message"
                      rows="4"
                      value={formData.message}
                      onChange={handleInputChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2"
                      style={{ '--tw-ring-color': 'var(--primary-gold)' }}
                    ></textarea>
                  </div>
                  <button
                    type="submit"
                    className="w-full text-white font-bold py-3 rounded-full hover:bg-yellow-600 transition-colors disabled:bg-opacity-50"
                    style={{ backgroundColor: 'var(--primary-gold)' }}
                    disabled={submissionStatus === 'submitting'}
                  >
                    {submissionStatus === 'submitting' ? 'Submitting...' : 'Join Now'}
                  </button>
                </form>
                {submissionStatus === 'success' && (
                  <div className="mt-4 p-4 rounded-lg bg-green-100 text-green-700">
                    Thank you for your interest! We'll be in touch.
                  </div>
                )}
                {submissionStatus === 'error' && (
                  <div className="mt-4 p-4 rounded-lg bg-red-100 text-red-700">
                    Something went wrong. Please try again.
                  </div>
                )}
              </div>
            </div>
          </section>

          {/* Blog/News Section (Optional) */}
          <section id="blog" className="py-20">
              <div className="container mx-auto px-4 text-center">
                  <h2 className="text-4xl font-bold mb-12">Latest News & Blog</h2>
                  <p className="text-gray-600 max-w-3xl mx-auto">
                      A dedicated section for updates, press releases, and creative opportunities.
                      In a full implementation, this section would pull content from a blog management system.
                  </p>
              </div>
          </section>

          {/* Merchandise Store (Placeholder) */}
          <section id="merchandise" className="py-20 bg-gray-100">
              <div className="container mx-auto px-4 text-center">
                  <h2 className="text-4xl font-bold mb-12">Merchandise Store</h2>
                  <p className="text-gray-600 max-w-3xl mx-auto">
                      This is where your e-commerce shop would be. It would require a full backend to manage products, inventory, and integrate with a payment system like Irembo Pay.
                  </p>
                  <div className="mt-8">
                      <ShoppingCart className="w-24 h-24 mx-auto opacity-50" style={{ color: 'var(--primary-gold)' }} />
                  </div>
              </div>
          </section>

          {/* Admin Dashboard (Placeholder) */}
          <section id="admin" className="py-20">
              <div className="container mx-auto px-4 text-center">
                  <h2 className="text-4xl font-bold mb-12">Admin Dashboard</h2>
                  <p className="text-gray-600 max-w-3xl mx-auto">
                      The Admin Dashboard would be a separate, secure part of the application for your team to easily update content. It would be a full-stack component with user authentication and database access.
                  </p>
              </div>
          </section>
        </main>

        {/* Footer */}
        <footer className="bg-gray-900 text-gray-300 py-12">
          <div className="container mx-auto px-4 text-center">
            <div className="flex justify-center space-x-6 mb-6">
              {socialLinks.map((link) => (
                <a key={link.name} href={link.href} target="_blank" rel="noopener noreferrer" className="hover:text-primary-gold transition-colors" style={{ color: 'var(--primary-gold)' }}>
                  <link.icon className="w-7 h-7" />
                </a>
              ))}
            </div>
            <p className="text-gray-500 text-sm">&copy; 2025 Tarama Rwanda. All Rights Reserved.</p>
          </div>
        </footer>
      </div>
    </>
  );
}
